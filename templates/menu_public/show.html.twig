{% extends 'base.html.twig' %}
{% block title %}{{ menu.title }}{% endblock %}

{% block body %}
<style>
  .hero-img{
    width:100%;
    height:320px;
    object-fit:cover;
    display:block;
    border-bottom:1px solid rgba(0,0,0,.06);
  }
  @media (min-width: 992px){
    .hero-img{ height:360px; }
  }

  .menu-title{
    font-family: Georgia, "Times New Roman", serif;
    font-weight: 600;
    letter-spacing: .2px;
  }
  .section-label{
    font-family: Georgia, "Times New Roman", serif;
    font-weight: 700;
    font-size: 1.25rem;
    margin-bottom:.25rem;
  }
  .dish-name{
    font-family: Georgia, "Times New Roman", serif;
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom:.15rem;
  }

  .side-img{
    width:100%;
    border-radius: .9rem;
    object-fit:cover;
    aspect-ratio: 16/9;
    display:block;
    border:1px solid rgba(0,0,0,.08);
  }

  .price-card{
    border:2px solid rgba(255, 99, 99, .45);
    border-radius: 1rem;
    background: #f8f9fa;
    box-shadow: 0 .5rem 1.2rem rgba(0,0,0,.06);
  }
  .btn-order{
    background:#ff6b6b;
    border-color:#ff6b6b;
    color:#fff;
    font-weight:600;
  }
  .btn-order:hover{
    background:#ff5252;
    border-color:#ff5252;
    color:#fff;
  }

  .review-box{
    border:2px solid rgba(255, 99, 99, .6);
    border-radius: .75rem;
    background:#fff;
    box-shadow: 0 .4rem 1rem rgba(0,0,0,.05);
  }
</style>

{# HERO #}
<img class="hero-img" src="{{ asset(coverPath) }}" alt="{{ menu.title }}">

<div class="container py-4">
  <h1 class="menu-title text-center mb-4">{{ menu.title }}</h1>

  <div class="row g-4 align-items-start">

    {# COLONNE GAUCHE : entrée/plat/dessert + avis #}
    <div class="col-12 col-lg-7">

      {# Entrée #}
      <div class="mb-3">
        <div class="section-label">Entrée</div>
        {% if entree %}
          <div class="dish-name">{{ entree.name }}</div>
          <div class="text-muted">{{ entree.description ?: '—' }}</div>
        {% else %}
          <div class="text-muted">Aucune entrée renseignée.</div>
        {% endif %}
      </div>

      {# Plat #}
      <div class="mb-3">
        <div class="section-label">Plat</div>
        {% if plat %}
          <div class="dish-name">{{ plat.name }}</div>
          <div class="text-muted">{{ plat.description ?: '—' }}</div>
        {% else %}
          <div class="text-muted">Aucun plat renseigné.</div>
        {% endif %}
      </div>

      {# Dessert #}
      <div class="mb-3">
        <div class="section-label">Dessert</div>
        {% if dessert %}
          <div class="dish-name">{{ dessert.name }}</div>
          <div class="text-muted">{{ dessert.description ?: '—' }}</div>
        {% else %}
          <div class="text-muted">Aucun dessert renseigné.</div>
        {% endif %}
      </div>

      {# Avis (bloc en bas à gauche comme maquette) #}
      <div class="review-box p-3 mt-4">
        <div class="mb-1" style="color:#ffb400; font-size:1.1rem;">★★★★★</div>
        <div class="small text-muted">
          Un menu raffiné et parfaitement équilibré, tout était délicieux !
          <br>
          <span class="fw-semibold">— Client satisfait</span>
        </div>
      </div>

      {% if menu.conditions %}
        <div class="mt-3 text-muted small">
          <strong>Conditions :</strong> {{ menu.conditions }}
        </div>
      {% endif %}
    </div>

    {# COLONNE DROITE : image + prix + bouton #}
    <div class="col-12 col-lg-5">
      <div class="position-sticky" style="top: 1rem;">
        <img class="side-img mb-3" src="{{ asset(coverPath) }}" alt="{{ menu.title }} - photo">


        <div class="price-card p-3 text-center">
          <div class="menu-title" style="font-size:2rem; line-height:1.1;">
            {{ menu.minPrice }}€/Personne
          </div>
          <div class="text-muted fw-semibold mb-3">
            min. {{ menu.minPeople }} personnes
          </div>

          {% if menu.stock is not null %}
            {% if menu.stock > 0 %}
              <div class="small text-success mb-2">Disponible (stock : {{ menu.stock }})</div>
            {% else %}
              <div class="small text-danger mb-2">Indisponible</div>
            {% endif %}
          {% endif %}

          {# ⚠️ Mets ta route de commande ici #}
          <a href="#"
             class="btn btn-order w-100 {% if menu.stock is not null and menu.stock <= 0 %}disabled{% endif %}">
            Commander
          </a>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
